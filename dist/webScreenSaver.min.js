!function(n,s,i,t){"use strict";var e={videos:[],videoDuration:-1,interval:12e4,stagnantDelay:5e3,stagnantTrigger:!0,target:s.querySelector("body"),triggerKeycode:32,nextVidKeycode:39},o=function(t,e){return i.floor(i.random()*(e-t+1)+t)},a=function(){Promise.settle=function(t){var e=t.map(function(t){return t.then(function(t){return{result:t,status:"resolved"}},function(t){return{result:t,status:"rejected"}})});return Promise.all(e)};return function(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),r=function(){function c(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function h(t,e){var i;return e&&!0===e.clone&&c(t)?l((i=t,Array.isArray(i)?[]:{}),t,e):t}function d(i,t,n){var r=i.slice();return t.forEach(function(t,e){void 0===r[e]?r[e]=h(t,n):c(t)?r[e]=l(i[e],t,n):-1===i.indexOf(t)&&r.push(h(t,n))}),r}function l(t,e,i){var n,r,o,s,a=Array.isArray(e),u=(i||{arrayMerge:d}).arrayMerge||d;return a?Array.isArray(t)?u(t,e,i):h(e,i):(n=t,r=e,s=(o=i)&&o.mutate?n:{},c(n)&&Object.keys(n).forEach(function(t){s[t]=h(n[t],o)}),Object.keys(r).forEach(function(t){c(r[t])&&n[t]?s[t]=l(n[t],r[t],o):s[t]=h(r[t],o)}),s)}return l.all=function(t,i){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,e){return l(t,e,i)})},l}(),VidCon=function(){function VidCon(t){if(this.target=t,this.transitionDuration=1e3,this.$=s.createElement("video"),this.$.setAttribute("class","vidcon"),this.$.setAttribute("autoplay","autoplay"),this.$.setAttribute("muted","muted"),"body"===this.target.tagName.toLowerCase())this.$.setAttribute("style","width: auto;height: auto;position: fixed;top: 50%;left: 50%;transform: translate3d(-50%,-50%,0);opacity:0;transition: opacity 1s linear;");else{var e=this.target.getBoundingClientRect(),i=e.width>=e.height?"100%":"auto",n="auto"===i?"100%":"auto";this.$.setAttribute("style","width: "+n+";height: "+i+";position: absolute;top: 50%;left: 50%;transform: translate3d(-50%,-50%,0);opacity:0;transition: opacity 1s linear;")}}return VidCon.prototype.setVideo=function(t){for(var e,i,n=s.createDocumentFragment(),r=Object.keys(t),o=0;o<r.length;o++)i=void 0,e=r[o],(i=s.createElement("source")).setAttribute("type","video/"+e),i.setAttribute("src",t[e]),n.appendChild(i);this.$.innerHTML="",this.$.appendChild(n)},VidCon.prototype.fadeIn=function(){var t=this,e=new a;return this.$.addEventListener("loadeddata",function(){t.$.style.opacity=1,setTimeout(function(){e.resolve()},this.transitionDuration),setTimeout(function(){t.$.play()},1)}),this.target.appendChild(this.$),e.promise},VidCon.prototype.fadeOut=function(){var t=this,e=new a;return t.$.style.opacity=0,setTimeout(function(){t.target.removeChild(t.$),e.resolve()},this.transitionDuration),e.promise},VidCon}();function WebScreensaver(t){if(this.config=r(e,t),this.target=t.target||e.target,this.currentVid=null,this.stagnantTimeout=null,this.isRunning=!1,this.setTargetStyle(),!this.config.videos||this.config.videos.length<=0)throw"Error: No videos provided.";this.config.stagnantTrigger?this.startWindowMonitor():this.startControlMonitor()}WebScreensaver.prototype.setTargetStyle=function(){this.target!==e.target&&(this.target.style.overflow="hidden","static"===this.target.style.position&&(this.target.style.position="relative"))},WebScreensaver.prototype.startSaver=function(){var n=this;this.isRunning=!0,this.toggleVideos().then(function(t){var e=1e3*(t.$.duration-t.$.currentTime),i=e<n.config.interval?e:n.config.interval;i-=5e3,setTimeout(function(){n.isRunning&&n.startSaver()},i)})},WebScreensaver.prototype.stopSaver=function(){this.isRunning=!1,this.currentVid&&(this.target.removeChild(this.currentVid.$),this.currentVid=null)},WebScreensaver.prototype.toggleVideos=function(){var t=new a,e=this,i=o(0,this.config.videos.length-1),n=this.config.videos[i],r=new VidCon(this.target);return r.setVideo(n),r.fadeIn().then(function(){e.currentVid&&e.currentVid.fadeOut(),e.currentVid=r,t.resolve(e.currentVid)}),t.promise},WebScreensaver.prototype.startWindowMonitor=function(){var t=this;this.stagnantTimeout=setTimeout(function(){t.startSaver()},this.config.stagnantDelay);var e=function(){n.clearTimeout(t.stagnantTimeout),t.stopSaver(),t.stagnantTimeout=setTimeout(function(){t.startSaver()},t.config.stagnantDelay)};n.addEventListener("click",e),n.addEventListener("mousemove",e),n.addEventListener("mousedown",e),n.addEventListener("keydown",e)},WebScreensaver.prototype.startControlMonitor=function(){var i=this;n.addEventListener("keydown",function(t){var e=t.which;e===i.config.triggerKeycode?i.currentVid?i.stopSaver():i.startSaver():e===i.config.nextVidKeycode&&i.currentVid&&i.toggleVideos()})},n.WebScreensaver=WebScreensaver}(window,document,Math);